# check_app_status.py
# Script to check the status of all applications in WebSphere Application Server

import sys

# Get the list of all applications
applications = AdminApp.list().splitlines()

# Loop through each application and check its status
running_apps = []
stopped_apps = []
for app in applications:
    app_status = AdminControl.queryNames('type=Application,name=' + app + ',*')
    if app_status:
        running_apps.append(app)
    else:
        stopped_apps.append(app)

print("Running applications: {}".format(", ".join(running_apps)))
print("Stopped applications: {}".format(", ".join(stopped_apps)))

if stopped_apps:
    print("Exiting with code 1 due to stopped applications.")
    sys.exit(1)
else:
    print("All applications are running. Exiting with code 0.")
    sys.exit(0)
